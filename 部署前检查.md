# 部署前检查清单 ✅

## 已完成的功能

### ✅ 指令管理
- [x] 添加/删除指令
- [x] 录制和播放语音
- [x] 拖拽排序
- [x] 指令分组（创建、编辑、删除、分配颜色）
- [x] 批量选择（单选、分组全选、全选）
- [x] **设置单次训练播放次数**（单个设置）
- [x] **批量设置单次训练播放次数**
- [x] **显示累计训练次数**（自动统计）

### ✅ 训练配置
- [x] 设置训练总时长
- [x] 设置指令间随机间隔
- [x] 预览选中的指令及其单次播放次数
- [x] 开始训练前验证（有录音、有设置次数）

### ✅ 训练执行
- [x] 随机播放指令
- [x] 随机时间间隔
- [x] 暂停/继续
- [x] 提前结束
- [x] **自动更新累计训练次数**
- [x] 显示训练进度

### ✅ 数据持久化
- [x] 指令数据保存到 localStorage
- [x] 语音数据保存到 localStorage
- [x] 分组数据保存
- [x] **单次播放次数保存**
- [x] **累计训练次数保存**
- [x] 训练配置保存

### ✅ PWA 支持
- [x] manifest.json 配置
- [x] service-worker.js
- [x] 可安装到手机主屏幕
- [x] 离线使用

## 核心改动说明

### 数据结构改动
```typescript
interface Command {
  id: string;
  name: string;
  audioBlob?: Blob;
  audioUrl?: string;
  trainingCount: number;     // 累计训练次数（系统自动记录）✨ 保留
  sessionCount: number;      // 单次训练播放次数（用户设置）✨ 新增
  order: number;
  groupId?: string;
  selected: boolean;
}
```

### 用户操作流程
1. **指令管理页面**
   - 设置每个指令的"单次训练播放次数"（单个或批量）
   - 查看每个指令的"累计训练次数"（只读统计）

2. **训练配置页面**
   - 预览选中指令及其单次播放次数
   - 设置训练总时长和间隔

3. **训练执行**
   - 系统根据 sessionCount 生成训练计划
   - 训练过程中自动累加 trainingCount

## 部署步骤

1. **提交代码到 GitHub**
   ```bash
   git add .
   git commit -m "完成单次训练播放次数和累计统计功能"
   git push
   ```

2. **在 Netlify 部署**
   - 登录 Netlify
   - 连接 GitHub 仓库
   - 等待自动构建和部署

3. **测试功能**
   - 添加几个指令并录音
   - 设置单次播放次数（测试单个设置和批量设置）
   - 开始一次训练
   - 检查训练后累计次数是否增加

4. **手机安装**
   - 用手机浏览器打开 Netlify 网址
   - 添加到主屏幕
   - 开始使用

## 兼容性说明

- **旧数据兼容**：已有指令会自动设置 sessionCount = 1
- **localStorage**：所有数据保存在本地，不会丢失

## 完成状态

🎉 所有功能已完成，可以部署使用！
